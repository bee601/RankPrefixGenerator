<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Minecraft Rank Designer</title>
    <link href="https://fonts.googleapis.com/css2?family=Silkscreen&display=swap" rel="stylesheet">
    <style>
        body { background: #111; color: #eee; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .canvas-container { 
            background: repeating-conic-gradient(#222 0% 25%, #111 0% 50%) 50% / 20px 20px;
            padding: 50px; border: 2px solid #333; margin-bottom: 20px;
        }
        canvas { 
            image-rendering: pixelated; /* Verhindert Browser-Glättung */
            transform: scale(10); /* Zeigt die 8px Grafik groß an ohne Matsch */
        }
        .controls { background: #222; padding: 20px; border-radius: 8px; display: grid; grid-template-columns: 1fr 1fr; gap: 20px; width: 600px; }
        input, button { padding: 10px; background: #000; border: 1px solid #444; color: #fff; border-radius: 4px; }
        .full { grid-column: span 2; }
        .color-group { display: flex; flex-direction: column; gap: 5px; }
        button { background: #e67e22; cursor: pointer; font-weight: bold; border: none; }
        button:hover { background: #d35400; }
    </style>
</head>
<body>

    <h1>Minecraft Pixel-Perfect Generator</h1>

    <div class="canvas-container">
        <canvas id="rankCanvas"></canvas>
    </div>

    <div class="controls">
        <div class="full">
            <label>Rank Text</label><br>
            <input type="text" id="textInput" value="OWNER" style="width: 96%" oninput="render()">
        </div>
        
        <div class="color-group">
            <label>Rahmen (HEX)</label>
            <input type="text" id="borderHex" value="#FF0000" oninput="render()">
        </div>

        <div class="color-group">
            <label>Hintergrund (HEX)</label>
            <input type="text" id="bgHex" value="#4D0000" oninput="render()">
        </div>

        <button class="full" onclick="download()">ALS PNG SPEICHERN (8PX)</button>
    </div>

<script>
    function render() {
        const canvas = document.getElementById('rankCanvas');
        const ctx = canvas.getContext('2d');
        const text = document.getElementById('textInput').value.toUpperCase();
        const borderColor = document.getElementById('borderHex').value;
        const bgColor = document.getElementById('bgHex').value;

        // 1. Textbreite messen (auf 8px Basis)
        ctx.font = "8px 'Silkscreen'";
        const textWidth = Math.ceil(ctx.measureText(text).width);
        
        // 2. Canvas Größe anpassen (8px fest für die Höhe!)
        canvas.width = textWidth + 4; 
        canvas.height = 8;

        // 3. Pixel-Modus erzwingen
        ctx.imageSmoothingEnabled = false;

        // 4. Hintergrund zeichnen
        ctx.fillStyle = bgColor;
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // 5. Rahmen zeichnen (1px genau)
        ctx.strokeStyle = borderColor;
        ctx.lineWidth = 1;
        ctx.strokeRect(0.5, 0.5, canvas.width - 1, canvas.height - 1);

        // 6. Schatten (Minecraft Style: 1px versetzt)
        ctx.fillStyle = "rgba(0,0,0,0.6)";
        ctx.fillText(text, 2.5, 7.5); 

        // 7. Text weiß (Exakt auf Pixel-Linie)
        ctx.fillStyle = "#FFFFFF";
        ctx.fillText(text, 2, 7);
    }

    function download() {
        const canvas = document.getElementById('rankCanvas');
        const link = document.createElement('a');
        link.download = 'rank.png';
        link.href = canvas.toDataURL('image/png');
        link.click();
    }

    // Warten bis Schrift geladen ist
    document.fonts.ready.then(render);
</script>
</body>
</html>
